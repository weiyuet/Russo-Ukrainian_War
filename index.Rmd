---
title: "Russo-Ukrainian War"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  html_document:
    code_folding: hide
    theme: simple
    fig_width: 9
    fig_height: 6
    toc: yes
    toc_float: yes
    number_sections: true
---
```{r Setup, include=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(ggblanket)
library(reshape2)
library(scales)
```

Inspired by the data sets collected by [Lena Sokol's Kaggle site](https://www.kaggle.com/code/sokolheavy/2022-ukraine-russia-war-visualization) and [Petro Ivanyuk's Kaggle site.](https://www.kaggle.com/datasets/piterfm/2022-ukraine-russian-war)
  
Want to understand the costs of war, and the broader picture such as global energy supply and food supply.

![](https://ichef.bbci.co.uk/news/976/cpsprodpb/2CDE/production/_124868411_ukraine_russian_control_areas_map_2x640-nc.png)

# Russian Casualties
```{r Russian Casualties CSV}
# Import data
russia_losses_equipment <- read_csv("data/russia_losses_equipment.csv")
russia_losses_personnel <- read_csv("data/russia_losses_personnel.csv")
```

```{r Change data to long format, include=FALSE , warning=FALSE}
# Change data to long format
russia_losses_equipment_long <- melt(russia_losses_equipment, id = "date")
russia_losses_personnel_long <- melt(russia_losses_personnel, id = "date")

# Convert value from chr to dbl
russia_losses_equipment_long$value <- as.double(as.character(russia_losses_equipment_long$value))
russia_losses_personnel_long$value <- as.double(as.character(russia_losses_personnel_long$value))
```

## Equipment
```{r Russian Losses Equipment plot, warning=FALSE}
russia_losses_equipment_long %>% 
  filter(variable == "aircraft" | variable == "helicopter" | variable == "tank" | variable == "APC" | variable == "field artillery" | variable == "drone") %>% 
  drop_na() %>% 
  gg_line(x = date,
          y = value,
          col = variable,
          title = "Russian Equipment Lost",
          x_title = "",
          y_title = "",
          col_legend_place = "r",
          col_title = "",
          caption = "Source: Armed Forces of Ukraine, Ministry of Defense of Ukraine\nGraphic: @wyuet",
          theme = theme_light()) +
  geom_point(size = 0.7) +
  scale_x_date(expand = c(0,0))

ggsave("figures/russia-losses-equipment.png", width = 6, height = 4)
```

## Personnel
```{r Russian Losses Personnel plot, warning=FALSE}
russia_losses_personnel_long %>% 
  filter(variable == "personnel" | variable == "POW") %>% 
  drop_na() %>% 
  gg_line(x = date,
          y = value,
          col = variable,
          title = "Russian Personnel Lost",
          x_title = "",
          y_title = "",
          col_legend_place = "r",
          col_title = "",
          caption = "Source: Armed Forces of Ukraine, Ministry of Defense of Ukraine\nGraphic: @wyuet",
          theme = theme_light()) +
  geom_point(size = 0.7) +
  scale_x_date(expand = c(0,0))

ggsave("figures/russia-losses-personnel.png", width = 6, height = 4)
```

# Russian Crude Oil Production

```{r Crude Oil Production CSV}
crude_oil_production_annual <- read_csv("data/crude_oil_production_annual.csv")
```

```{r Change TIME variable from dbl to date, include=FALSE, warning=FALSE}
#crude_oil_production_annual$TIME <- as_date(as.double(crude_oil_production_annual$TIME))
```


```{r Crude Oil Production plot, warning=FALSE}
crude_oil_production_annual %>% 
  filter(LOCATION == "RUS" | LOCATION == "UKR" | LOCATION == "EU28" | LOCATION =="OECD") %>% 
  gg_line(x = TIME,
          y = Value,
          col = LOCATION,
          title = "Crude Oil Production in (Total, Thousand TOE)",
          x_title = "",
          y_title = "",
          col_legend_place = "r",
          col_title = "",
          caption = "Source: Extended World Energy Balances. OECD\nGraphic: @wyuet",
          theme = theme_light()) +
  geom_point(size = 0.7) +
  scale_x_continuous(labels = label_number(big.mark = ""))

ggsave("figures/russia-crude-oil-production.png", width = 6, height = 4)
```
